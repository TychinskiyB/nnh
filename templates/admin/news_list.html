{% extends "admin/base.html" %}
{% block admin %}
  <div class="flex">
    <h2 class="mt-0">Новости</h2>
    <a class="btn btn-primary" href="{{ url_for('admin_news_create') }}" style="margin-left:auto;">+ Новая</a>
  </div>
  <div class="table mt-2">
    <table>
      <thead><tr><th>ID</th><th>Заголовок</th><th>Дата</th><th>Закреплена</th><th></th></tr></thead>
      <tbody>
        {% for p in posts %}
        <tr>
          <td>{{ p.id }}</td>
          <td>{{ p.title }}</td>
          <td>{{ p.created_at.strftime('%Y-%m-%d') }}</td>
          <td>{{ 'Да' if p.pinned else 'Нет' }}</td>
          <td class="right">
            <a class="btn btn-sm" href="{{ url_for('admin_news_edit', pid=p.id) }}">Редактировать</a>
            <form action="{{ url_for('admin_news_delete', pid=p.id) }}" method="POST" onsubmit="return confirm('Удалить новость?')">
              <button class="btn btn-danger btn-sm" type="submit">Удалить</button>
            </form>
          </td>
        </tr>
        {% else %}
        <tr><td colspan="5">Пока нет новостей</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
